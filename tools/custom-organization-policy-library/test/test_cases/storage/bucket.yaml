shared_config:
  command:  gcloud storage buckets create gs://{{ identifier }} 
  teardown_command: gcloud storage buckets delete  gs://{{ identifier }}
  default_command_flags: 
    location: asia-southeast1
    uniform-bucket-level-access: true

storage_bucket_uniform_bucket_level_access:
  steps:
  - expected_result:
      return_code: 0
  markers:
    - storage

storage_bucket_no_uniform_bucket_level_access:
  steps:
  - command_flags:
      uniform-bucket-level-access: false
      location: asia-southeast2
    expected_result:
      return_code: 1
      stderr: 'constraints/storage.uniformBucketLevelAccess'
  markers:
    - storage